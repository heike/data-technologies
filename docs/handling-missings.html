<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Handling Missings | Data Science and Statistical Thinking: With Wild-Caught Data and R</title>
  <meta name="description" content="Chapter 6 Handling Missings | Data Science and Statistical Thinking: With Wild-Caught Data and R" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Handling Missings | Data Science and Statistical Thinking: With Wild-Caught Data and R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Handling Missings | Data Science and Statistical Thinking: With Wild-Caught Data and R" />
  
  
  

<meta name="author" content="Heike Hofmann, Dianne Cook, Susan Vanderplas and Earo Wang" />


<meta name="date" content="2023-06-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="wrangling-data.html"/>
<link rel="next" href="data-visualization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.1.9000/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science and Statistical Thinking</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#what-is-exploratory-data-analysis"><i class="fa fa-check"></i><b>2.1</b> What is exploratory data analysis?</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#what-is-wild-data"><i class="fa fa-check"></i><b>2.2</b> What is <strong>wild</strong> data?</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#what-is-computational-statistical-thinking"><i class="fa fa-check"></i><b>2.3</b> What is computational statistical thinking?</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#workflow"><i class="fa fa-check"></i><b>2.4</b> Workflow</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="accessing-data.html"><a href="accessing-data.html"><i class="fa fa-check"></i><b>3</b> Accessing Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="accessing-data.html"><a href="accessing-data.html#flat-files"><i class="fa fa-check"></i><b>3.1</b> Flat files</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="accessing-data.html"><a href="accessing-data.html#example-tuberculosis"><i class="fa fa-check"></i><b>3.1.1</b> Example: tuberculosis</a></li>
<li class="chapter" data-level="3.1.2" data-path="accessing-data.html"><a href="accessing-data.html#your-turn-atmospheric-carbon-dioxide"><i class="fa fa-check"></i><b>3.1.2</b> Your turn: atmospheric carbon dioxide</a></li>
<li class="chapter" data-level="3.1.3" data-path="accessing-data.html"><a href="accessing-data.html#example-standardised-test-scores-for-reading-science-and-math"><i class="fa fa-check"></i><b>3.1.3</b> Example: standardised test scores for reading, science and math</a></li>
<li class="chapter" data-level="3.1.4" data-path="accessing-data.html"><a href="accessing-data.html#your-turn-land-surface-weather-station-data"><i class="fa fa-check"></i><b>3.1.4</b> Your turn: land surface weather station data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="accessing-data.html"><a href="accessing-data.html#proprietary-formats"><i class="fa fa-check"></i><b>3.2</b> Proprietary formats</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="accessing-data.html"><a href="accessing-data.html#example-australia-air-traffic-data"><i class="fa fa-check"></i><b>3.2.1</b> Example: Australia air traffic data</a></li>
<li class="chapter" data-level="3.2.2" data-path="accessing-data.html"><a href="accessing-data.html#your-turn-munging-spreadsheets"><i class="fa fa-check"></i><b>3.2.2</b> Your turn: Munging spreadsheets</a></li>
<li class="chapter" data-level="3.2.3" data-path="accessing-data.html"><a href="accessing-data.html#example-spss-binary"><i class="fa fa-check"></i><b>3.2.3</b> Example: SPSS binary</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="accessing-data.html"><a href="accessing-data.html#reading-multiple-files-from-a-website"><i class="fa fa-check"></i><b>3.3</b> Reading multiple files from a website</a></li>
<li class="chapter" data-level="3.4" data-path="accessing-data.html"><a href="accessing-data.html#json"><i class="fa fa-check"></i><b>3.4</b> JSON</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="accessing-data.html"><a href="accessing-data.html#example-crossrates"><i class="fa fa-check"></i><b>3.4.1</b> Example: Crossrates</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="accessing-data.html"><a href="accessing-data.html#shapefiles"><i class="fa fa-check"></i><b>3.5</b> Shapefiles</a></li>
<li class="chapter" data-level="3.6" data-path="accessing-data.html"><a href="accessing-data.html#apis"><i class="fa fa-check"></i><b>3.6</b> APIs</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="accessing-data.html"><a href="accessing-data.html#melbourne-pedestrian-traffic-rwalkr"><i class="fa fa-check"></i><b>3.6.1</b> Melbourne pedestrian traffic: <code>rwalkr</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="accessing-data.html"><a href="accessing-data.html#australian-weather-bomrang"><i class="fa fa-check"></i><b>3.6.2</b> Australian weather: <code>bomrang</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="accessing-data.html"><a href="accessing-data.html#atlas-of-living-austraila-ala4r"><i class="fa fa-check"></i><b>3.6.3</b> Atlas of Living Austraila: <code>ala4R</code></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="accessing-data.html"><a href="accessing-data.html#images-as-data"><i class="fa fa-check"></i><b>3.7</b> Images as data</a></li>
<li class="chapter" data-level="3.8" data-path="accessing-data.html"><a href="accessing-data.html#databases"><i class="fa fa-check"></i><b>3.8</b> Databases</a></li>
<li class="chapter" data-level="3.9" data-path="accessing-data.html"><a href="accessing-data.html#working-with-text"><i class="fa fa-check"></i><b>3.9</b> Working with text</a></li>
<li class="chapter" data-level="3.10" data-path="accessing-data.html"><a href="accessing-data.html#scraping-data"><i class="fa fa-check"></i><b>3.10</b> Scraping Data</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="accessing-data.html"><a href="accessing-data.html#examples"><i class="fa fa-check"></i><b>3.10.1</b> Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html"><i class="fa fa-check"></i><b>4</b> Tidying Common Data Formats</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#terminology"><i class="fa fa-check"></i><b>4.1</b> Terminology</a></li>
<li class="chapter" data-level="4.2" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#tidy-tabular-form"><i class="fa fa-check"></i><b>4.2</b> Tidy tabular form</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#wide-format"><i class="fa fa-check"></i><b>4.2.1</b> Wide format</a></li>
<li class="chapter" data-level="4.2.2" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#long-format"><i class="fa fa-check"></i><b>4.2.2</b> Long format</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#raw-data-examples"><i class="fa fa-check"></i><b>4.3</b> Raw data examples</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#gene-expression-experiment"><i class="fa fa-check"></i><b>4.3.1</b> Gene expression experiment</a></li>
<li class="chapter" data-level="4.3.2" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#melbourne-weather"><i class="fa fa-check"></i><b>4.3.2</b> Melbourne weather</a></li>
<li class="chapter" data-level="4.3.3" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#tb-incidence"><i class="fa fa-check"></i><b>4.3.3</b> TB incidence</a></li>
<li class="chapter" data-level="4.3.4" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#french-fries"><i class="fa fa-check"></i><b>4.3.4</b> French fries</a></li>
<li class="chapter" data-level="4.3.5" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#contingency-table"><i class="fa fa-check"></i><b>4.3.5</b> Contingency table</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#abs-datapack"><i class="fa fa-check"></i><b>4.4</b> ABS Datapack</a></li>
<li class="chapter" data-level="4.5" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#messy-vs-tidy"><i class="fa fa-check"></i><b>4.5</b> Messy vs tidy</a></li>
<li class="chapter" data-level="4.6" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#tidy-verbs"><i class="fa fa-check"></i><b>4.6</b> Tidy verbs</a></li>
<li class="chapter" data-level="4.7" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#tidying-genes-data"><i class="fa fa-check"></i><b>4.7</b> Tidying genes data</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#separate-columns"><i class="fa fa-check"></i><b>4.7.1</b> Separate columns</a></li>
<li class="chapter" data-level="4.7.2" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#now-spread-to-examine-different-aspects"><i class="fa fa-check"></i><b>4.7.2</b> Now spread to examine different aspects</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#try-this-yourself"><i class="fa fa-check"></i><b>4.8</b> Try this yourself</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#exercise-1"><i class="fa fa-check"></i><b>4.8.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.8.2" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#exercise-2"><i class="fa fa-check"></i><b>4.8.2</b> Exercise 2</a></li>
<li class="chapter" data-level="4.8.3" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#exercise-3"><i class="fa fa-check"></i><b>4.8.3</b> Exercise 3</a></li>
<li class="chapter" data-level="4.8.4" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#exercise-4"><i class="fa fa-check"></i><b>4.8.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#tidying-melbourne-weather"><i class="fa fa-check"></i><b>4.9</b> Tidying Melbourne weather</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#sometime-easier-to-index-select"><i class="fa fa-check"></i><b>4.9.1</b> Sometime easier to index select</a></li>
<li class="chapter" data-level="4.9.2" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#make-long-form"><i class="fa fa-check"></i><b>4.9.2</b> Make long form</a></li>
<li class="chapter" data-level="4.9.3" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#use-spread-to-look-at-different-things"><i class="fa fa-check"></i><b>4.9.3</b> Use spread to look at different things</a></li>
<li class="chapter" data-level="4.9.4" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#what-are-the-numbers"><i class="fa fa-check"></i><b>4.9.4</b> What are the numbers?</a></li>
<li class="chapter" data-level="4.9.5" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#now-use-spread"><i class="fa fa-check"></i><b>4.9.5</b> Now use spread</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="tidying-common-data-formats.html"><a href="tidying-common-data-formats.html#exercises"><i class="fa fa-check"></i><b>4.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="wrangling-data.html"><a href="wrangling-data.html"><i class="fa fa-check"></i><b>5</b> Wrangling Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="wrangling-data.html"><a href="wrangling-data.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="wrangling-data.html"><a href="wrangling-data.html#side-note-package-system"><i class="fa fa-check"></i><b>5.2</b> Side-note: Package system</a></li>
<li class="chapter" data-level="5.3" data-path="wrangling-data.html"><a href="wrangling-data.html#example-french-fries"><i class="fa fa-check"></i><b>5.3</b> Example: french fries</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="wrangling-data.html"><a href="wrangling-data.html#the-story-of-the-french-fries-data."><i class="fa fa-check"></i><b>5.3.1</b> The story of the french fries data….</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="wrangling-data.html"><a href="wrangling-data.html#filter-choose-observations"><i class="fa fa-check"></i><b>5.4</b> filter: choose observations</a></li>
<li class="chapter" data-level="5.5" data-path="wrangling-data.html"><a href="wrangling-data.html#select"><i class="fa fa-check"></i><b>5.5</b> select</a></li>
<li class="chapter" data-level="5.6" data-path="wrangling-data.html"><a href="wrangling-data.html#mutate"><i class="fa fa-check"></i><b>5.6</b> mutate</a></li>
<li class="chapter" data-level="5.7" data-path="wrangling-data.html"><a href="wrangling-data.html#summarise-and-group_by"><i class="fa fa-check"></i><b>5.7</b> summarise and group_by</a></li>
<li class="chapter" data-level="5.8" data-path="wrangling-data.html"><a href="wrangling-data.html#arrange"><i class="fa fa-check"></i><b>5.8</b> arrange</a></li>
<li class="chapter" data-level="5.9" data-path="wrangling-data.html"><a href="wrangling-data.html#count-tally"><i class="fa fa-check"></i><b>5.9</b> count, tally</a></li>
<li class="chapter" data-level="5.10" data-path="wrangling-data.html"><a href="wrangling-data.html#putting-it-together-to-problem-solve"><i class="fa fa-check"></i><b>5.10</b> Putting it together to problem solve</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="wrangling-data.html"><a href="wrangling-data.html#are-ratings-similar"><i class="fa fa-check"></i><b>5.10.1</b> Are ratings similar?</a></li>
<li class="chapter" data-level="5.10.2" data-path="wrangling-data.html"><a href="wrangling-data.html#are-reps-like-each-other"><i class="fa fa-check"></i><b>5.10.2</b> Are reps like each other</a></li>
<li class="chapter" data-level="5.10.3" data-path="wrangling-data.html"><a href="wrangling-data.html#replicates-by-rating-type"><i class="fa fa-check"></i><b>5.10.3</b> Replicates by rating type</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="wrangling-data.html"><a href="wrangling-data.html#exercise"><i class="fa fa-check"></i><b>5.11</b> Exercise</a></li>
<li class="chapter" data-level="5.12" data-path="wrangling-data.html"><a href="wrangling-data.html#relational-data-and-joins"><i class="fa fa-check"></i><b>5.12</b> Relational data, and joins</a>
<ul>
<li class="chapter" data-level="5.12.1" data-path="wrangling-data.html"><a href="wrangling-data.html#keys"><i class="fa fa-check"></i><b>5.12.1</b> Keys</a></li>
<li class="chapter" data-level="5.12.2" data-path="wrangling-data.html"><a href="wrangling-data.html#joins"><i class="fa fa-check"></i><b>5.12.2</b> Joins</a></li>
<li class="chapter" data-level="5.12.3" data-path="wrangling-data.html"><a href="wrangling-data.html#airline-travel-ontime-data"><i class="fa fa-check"></i><b>5.12.3</b> Airline travel, ontime data</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="wrangling-data.html"><a href="wrangling-data.html#exercise-5"><i class="fa fa-check"></i><b>5.13</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="handling-missings.html"><a href="handling-missings.html"><i class="fa fa-check"></i><b>6</b> Handling Missings</a>
<ul>
<li class="chapter" data-level="6.1" data-path="handling-missings.html"><a href="handling-missings.html#overview-1"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="handling-missings.html"><a href="handling-missings.html#a-story-of-missing-flights"><i class="fa fa-check"></i><b>6.2</b> A story of missing flights</a></li>
<li class="chapter" data-level="6.3" data-path="handling-missings.html"><a href="handling-missings.html#data-set-overview"><i class="fa fa-check"></i><b>6.3</b> Data set overview</a></li>
<li class="chapter" data-level="6.4" data-path="handling-missings.html"><a href="handling-missings.html#missing-value-patterns"><i class="fa fa-check"></i><b>6.4</b> Missing value patterns</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="handling-missings.html"><a href="handling-missings.html#missingness-map"><i class="fa fa-check"></i><b>6.4.1</b> Missingness map</a></li>
<li class="chapter" data-level="6.4.2" data-path="handling-missings.html"><a href="handling-missings.html#numerical-summaries"><i class="fa fa-check"></i><b>6.4.2</b> Numerical summaries</a></li>
<li class="chapter" data-level="6.4.3" data-path="handling-missings.html"><a href="handling-missings.html#tend-to-get-ignored-by-most-software"><i class="fa fa-check"></i><b>6.4.3</b> Tend to get ignored by most software</a></li>
<li class="chapter" data-level="6.4.4" data-path="handling-missings.html"><a href="handling-missings.html#add-them-to-plot"><i class="fa fa-check"></i><b>6.4.4</b> Add them to plot</a></li>
<li class="chapter" data-level="6.4.5" data-path="handling-missings.html"><a href="handling-missings.html#understanding-missing-dependencies"><i class="fa fa-check"></i><b>6.4.5</b> Understanding missing dependencies</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="handling-missings.html"><a href="handling-missings.html#shadow-matrix"><i class="fa fa-check"></i><b>6.5</b> Shadow matrix</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="handling-missings.html"><a href="handling-missings.html#relationship-with-other-variables"><i class="fa fa-check"></i><b>6.5.1</b> Relationship with other variables</a></li>
<li class="chapter" data-level="6.5.2" data-path="handling-missings.html"><a href="handling-missings.html#two-minute-challenge"><i class="fa fa-check"></i><b>6.5.2</b> Two minute challenge</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="handling-missings.html"><a href="handling-missings.html#strategy"><i class="fa fa-check"></i><b>6.6</b> Strategy</a></li>
<li class="chapter" data-level="6.7" data-path="handling-missings.html"><a href="handling-missings.html#common-ways-to-impute-values"><i class="fa fa-check"></i><b>6.7</b> Common ways to impute values</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="handling-missings.html"><a href="handling-missings.html#mean"><i class="fa fa-check"></i><b>6.7.1</b> Mean</a></li>
<li class="chapter" data-level="6.7.2" data-path="handling-missings.html"><a href="handling-missings.html#by-year"><i class="fa fa-check"></i><b>6.7.2</b> by year</a></li>
<li class="chapter" data-level="6.7.3" data-path="handling-missings.html"><a href="handling-missings.html#two-minute-challenge-1"><i class="fa fa-check"></i><b>6.7.3</b> Two minute challenge</a></li>
<li class="chapter" data-level="6.7.4" data-path="handling-missings.html"><a href="handling-missings.html#nearest-neighbors-imputation"><i class="fa fa-check"></i><b>6.7.4</b> Nearest neighbors imputation</a></li>
<li class="chapter" data-level="6.7.5" data-path="handling-missings.html"><a href="handling-missings.html#by-year-1"><i class="fa fa-check"></i><b>6.7.5</b> by year</a></li>
<li class="chapter" data-level="6.7.6" data-path="handling-missings.html"><a href="handling-missings.html#two-minute-challenge-2"><i class="fa fa-check"></i><b>6.7.6</b> Two minute challenge</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="handling-missings.html"><a href="handling-missings.html#exercise-6"><i class="fa fa-check"></i><b>6.8</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>7</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-visualization.html"><a href="data-visualization.html#a-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1</b> A grammar of graphics</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-visualization.html"><a href="data-visualization.html#what-is-a-data-plot"><i class="fa fa-check"></i><b>7.1.1</b> What is a data plot?</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-visualization.html"><a href="data-visualization.html#why"><i class="fa fa-check"></i><b>7.1.2</b> Why?</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-visualization.html"><a href="data-visualization.html#elements-of-the-grammar"><i class="fa fa-check"></i><b>7.1.3</b> Elements of the grammar</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-visualization.html"><a href="data-visualization.html#example-tuberculosis-data"><i class="fa fa-check"></i><b>7.2</b> Example: Tuberculosis data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-visualization.html"><a href="data-visualization.html#charts"><i class="fa fa-check"></i><b>7.2.1</b> 100% charts</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-visualization.html"><a href="data-visualization.html#bar-charts"><i class="fa fa-check"></i><b>7.2.2</b> Bar charts</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-visualization.html"><a href="data-visualization.html#side-by-side-barcharts"><i class="fa fa-check"></i><b>7.2.3</b> Side-by-side barcharts</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-visualization.html"><a href="data-visualization.html#separate-bar-charts"><i class="fa fa-check"></i><b>7.2.4</b> Separate bar charts</a></li>
<li class="chapter" data-level="7.2.5" data-path="data-visualization.html"><a href="data-visualization.html#pie-charts"><i class="fa fa-check"></i><b>7.2.5</b> Pie charts?</a></li>
<li class="chapter" data-level="7.2.6" data-path="data-visualization.html"><a href="data-visualization.html#rainbow-charts"><i class="fa fa-check"></i><b>7.2.6</b> Rainbow charts?</a></li>
<li class="chapter" data-level="7.2.7" data-path="data-visualization.html"><a href="data-visualization.html#pie-charts-1"><i class="fa fa-check"></i><b>7.2.7</b> Pie charts</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-visualization.html"><a href="data-visualization.html#variable-types-and-mapping"><i class="fa fa-check"></i><b>7.3</b> Variable types and mapping</a></li>
<li class="chapter" data-level="7.4" data-path="data-visualization.html"><a href="data-visualization.html#coordinate-systems"><i class="fa fa-check"></i><b>7.4</b> Coordinate systems</a></li>
<li class="chapter" data-level="7.5" data-path="data-visualization.html"><a href="data-visualization.html#layering"><i class="fa fa-check"></i><b>7.5</b> Layering</a></li>
<li class="chapter" data-level="7.6" data-path="data-visualization.html"><a href="data-visualization.html#colour-palettes"><i class="fa fa-check"></i><b>7.6</b> Colour palettes</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="data-visualization.html"><a href="data-visualization.html#choropleth-map"><i class="fa fa-check"></i><b>7.6.1</b> Choropleth map</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="data-visualization.html"><a href="data-visualization.html#colour-blindness"><i class="fa fa-check"></i><b>7.7</b> Colour blindness</a></li>
<li class="chapter" data-level="7.8" data-path="data-visualization.html"><a href="data-visualization.html#pre-attentive"><i class="fa fa-check"></i><b>7.8</b> Pre-attentive</a></li>
<li class="chapter" data-level="7.9" data-path="data-visualization.html"><a href="data-visualization.html#proximity"><i class="fa fa-check"></i><b>7.9</b> Proximity</a></li>
<li class="chapter" data-level="7.10" data-path="data-visualization.html"><a href="data-visualization.html#hierarchy-of-mappings"><i class="fa fa-check"></i><b>7.10</b> Hierarchy of mappings</a></li>
<li class="chapter" data-level="7.11" data-path="data-visualization.html"><a href="data-visualization.html#adding-interactivity-to-plots"><i class="fa fa-check"></i><b>7.11</b> Adding interactivity to plots</a></li>
<li class="chapter" data-level="7.12" data-path="data-visualization.html"><a href="data-visualization.html#themes"><i class="fa fa-check"></i><b>7.12</b> Themes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html"><i class="fa fa-check"></i><b>8</b> Text data and strings</a>
<ul>
<li class="chapter" data-level="8.1" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#why-1"><i class="fa fa-check"></i><b>8.1</b> Why?</a></li>
<li class="chapter" data-level="8.2" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#process"><i class="fa fa-check"></i><b>8.2</b> Process</a></li>
<li class="chapter" data-level="8.3" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#resource"><i class="fa fa-check"></i><b>8.3</b> Resource</a></li>
<li class="chapter" data-level="8.4" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#getting-some-books-to-study"><i class="fa fa-check"></i><b>8.4</b> Getting some books to study</a></li>
<li class="chapter" data-level="8.5" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#tokenize"><i class="fa fa-check"></i><b>8.5</b> Tokenize</a></li>
<li class="chapter" data-level="8.6" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#your-turn-9"><i class="fa fa-check"></i><b>8.6</b> Your turn</a></li>
<li class="chapter" data-level="8.7" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#compare-the-word-frequency"><i class="fa fa-check"></i><b>8.7</b> Compare the word frequency</a></li>
<li class="chapter" data-level="8.8" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#book-comparison"><i class="fa fa-check"></i><b>8.8</b> Book comparison</a></li>
<li class="chapter" data-level="8.9" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#exercise-7"><i class="fa fa-check"></i><b>8.9</b> Exercise</a></li>
<li class="chapter" data-level="8.10" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#sentiment-analysis"><i class="fa fa-check"></i><b>8.10</b> Sentiment Analysis</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#lexicons"><i class="fa fa-check"></i><b>8.10.1</b> Lexicons</a></li>
<li class="chapter" data-level="8.10.2" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#analysis"><i class="fa fa-check"></i><b>8.10.2</b> Analysis</a></li>
<li class="chapter" data-level="8.10.3" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#comparing-lexicons"><i class="fa fa-check"></i><b>8.10.3</b> Comparing lexicons</a></li>
<li class="chapter" data-level="8.10.4" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#example-simpsons"><i class="fa fa-check"></i><b>8.10.4</b> Example: Simpsons</a></li>
<li class="chapter" data-level="8.10.5" data-path="text-data-and-strings.html"><a href="text-data-and-strings.html#example-afl-finals-tweets"><i class="fa fa-check"></i><b>8.10.5</b> Example: AFL Finals tweets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="dates-and-time.html"><a href="dates-and-time.html"><i class="fa fa-check"></i><b>9</b> Dates and time</a>
<ul>
<li class="chapter" data-level="9.1" data-path="dates-and-time.html"><a href="dates-and-time.html#overview-2"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="dates-and-time.html"><a href="dates-and-time.html#working-with-dates"><i class="fa fa-check"></i><b>9.2</b> Working with dates</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="dates-and-time.html"><a href="dates-and-time.html#parsing-dates-with-time-zones"><i class="fa fa-check"></i><b>9.2.1</b> Parsing dates with time zones</a></li>
<li class="chapter" data-level="9.2.2" data-path="dates-and-time.html"><a href="dates-and-time.html#parsing-date-with-times"><i class="fa fa-check"></i><b>9.2.2</b> Parsing date with times</a></li>
<li class="chapter" data-level="9.2.3" data-path="dates-and-time.html"><a href="dates-and-time.html#extracting-temporal-elements"><i class="fa fa-check"></i><b>9.2.3</b> Extracting temporal elements</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="dates-and-time.html"><a href="dates-and-time.html#example-pedestrian-sensor"><i class="fa fa-check"></i><b>9.3</b> Example: pedestrian sensor</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="dates-and-time.html"><a href="dates-and-time.html#make-some-plots"><i class="fa fa-check"></i><b>9.3.1</b> Make some plots</a></li>
<li class="chapter" data-level="9.3.2" data-path="dates-and-time.html"><a href="dates-and-time.html#what-might-be-wrong-with-these-interpretations"><i class="fa fa-check"></i><b>9.3.2</b> What might be wrong with these interpretations?</a></li>
<li class="chapter" data-level="9.3.3" data-path="dates-and-time.html"><a href="dates-and-time.html#to-think-about"><i class="fa fa-check"></i><b>9.3.3</b> To think about</a></li>
<li class="chapter" data-level="9.3.4" data-path="dates-and-time.html"><a href="dates-and-time.html#beyond-aggregation"><i class="fa fa-check"></i><b>9.3.4</b> Beyond aggregation</a></li>
<li class="chapter" data-level="9.3.5" data-path="dates-and-time.html"><a href="dates-and-time.html#incorporating-time"><i class="fa fa-check"></i><b>9.3.5</b> Incorporating time</a></li>
<li class="chapter" data-level="9.3.6" data-path="dates-and-time.html"><a href="dates-and-time.html#on-a-calendar"><i class="fa fa-check"></i><b>9.3.6</b> On a calendar</a></li>
<li class="chapter" data-level="9.3.7" data-path="dates-and-time.html"><a href="dates-and-time.html#holidays"><i class="fa fa-check"></i><b>9.3.7</b> Holidays</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="dates-and-time.html"><a href="dates-and-time.html#exercise-8"><i class="fa fa-check"></i><b>9.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i><b>10</b> Spatial data</a></li>
<li class="chapter" data-level="11" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>11</b> Networks</a>
<ul>
<li class="chapter" data-level="11.1" data-path="networks.html"><a href="networks.html#example-madmen"><i class="fa fa-check"></i><b>11.1</b> Example: Madmen</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="networks.html"><a href="networks.html#generate-a-network-view"><i class="fa fa-check"></i><b>11.1.1</b> Generate a network view</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="networks.html"><a href="networks.html#example-american-college-football"><i class="fa fa-check"></i><b>11.2</b> Example: American college football</a></li>
<li class="chapter" data-level="11.3" data-path="networks.html"><a href="networks.html#example-harry-potter-characters"><i class="fa fa-check"></i><b>11.3</b> Example: Harry Potter characters</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="variation-and-inference.html"><a href="variation-and-inference.html"><i class="fa fa-check"></i><b>12</b> Variation and inference</a>
<ul>
<li class="chapter" data-level="12.1" data-path="variation-and-inference.html"><a href="variation-and-inference.html#what-is-variation-and-uncertainty"><i class="fa fa-check"></i><b>12.1</b> What is variation and uncertainty?</a></li>
<li class="chapter" data-level="12.2" data-path="variation-and-inference.html"><a href="variation-and-inference.html#ways-of-sampling-the-data"><i class="fa fa-check"></i><b>12.2</b> Ways of sampling the data</a></li>
<li class="chapter" data-level="12.3" data-path="variation-and-inference.html"><a href="variation-and-inference.html#what-is-inference"><i class="fa fa-check"></i><b>12.3</b> What is inference?</a></li>
<li class="chapter" data-level="12.4" data-path="variation-and-inference.html"><a href="variation-and-inference.html#collecting-data"><i class="fa fa-check"></i><b>12.4</b> Collecting data</a></li>
<li class="chapter" data-level="12.5" data-path="variation-and-inference.html"><a href="variation-and-inference.html#randomization-tests"><i class="fa fa-check"></i><b>12.5</b> Randomization tests</a></li>
<li class="chapter" data-level="12.6" data-path="variation-and-inference.html"><a href="variation-and-inference.html#visual-inference"><i class="fa fa-check"></i><b>12.6</b> Visual inference</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="statistical-distributions.html"><a href="statistical-distributions.html"><i class="fa fa-check"></i><b>13</b> Statistical distributions</a></li>
<li class="chapter" data-level="14" data-path="randomization-methods.html"><a href="randomization-methods.html"><i class="fa fa-check"></i><b>14</b> Randomization methods</a></li>
<li class="chapter" data-level="15" data-path="variation-and-inference-1.html"><a href="variation-and-inference-1.html"><i class="fa fa-check"></i><b>15</b> Variation and inference</a></li>
<li class="chapter" data-level="16" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html"><i class="fa fa-check"></i><b>16</b> Model fitting and optimisation</a>
<ul>
<li class="chapter" data-level="16.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#overview-3"><i class="fa fa-check"></i><b>16.1</b> Overview</a></li>
<li class="chapter" data-level="16.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#why-models"><i class="fa fa-check"></i><b>16.2</b> Why models?</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#example"><i class="fa fa-check"></i><b>16.2.1</b> Example</a></li>
<li class="chapter" data-level="16.2.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#model-families"><i class="fa fa-check"></i><b>16.2.2</b> Model families</a></li>
<li class="chapter" data-level="16.2.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#your-turn-15"><i class="fa fa-check"></i><b>16.2.3</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#linear-models"><i class="fa fa-check"></i><b>16.3</b> Linear models</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#correlation-vs-linear-model"><i class="fa fa-check"></i><b>16.3.1</b> Correlation vs linear model</a></li>
<li class="chapter" data-level="16.3.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#correlation"><i class="fa fa-check"></i><b>16.3.2</b> Correlation</a></li>
<li class="chapter" data-level="16.3.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#simple-regression"><i class="fa fa-check"></i><b>16.3.3</b> Simple regression</a></li>
<li class="chapter" data-level="16.3.4" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#multiple-regression-model"><i class="fa fa-check"></i><b>16.3.4</b> Multiple regression model</a></li>
<li class="chapter" data-level="16.3.5" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#what-a-model-says"><i class="fa fa-check"></i><b>16.3.5</b> What a model says</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#lets-fit-a-model-to-co2"><i class="fa fa-check"></i><b>16.4</b> Let’s fit a model to CO2</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#try-a-linear-fit"><i class="fa fa-check"></i><b>16.4.1</b> Try a linear fit</a></li>
<li class="chapter" data-level="16.4.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#predict-from-the-model"><i class="fa fa-check"></i><b>16.4.2</b> Predict from the model</a></li>
<li class="chapter" data-level="16.4.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#plot-the-model"><i class="fa fa-check"></i><b>16.4.3</b> Plot the model</a></li>
<li class="chapter" data-level="16.4.4" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#examine-residuals"><i class="fa fa-check"></i><b>16.4.4</b> Examine residuals</a></li>
<li class="chapter" data-level="16.4.5" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#assessment-of-fit"><i class="fa fa-check"></i><b>16.4.5</b> Assessment of fit</a></li>
<li class="chapter" data-level="16.4.6" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#your-turn-16"><i class="fa fa-check"></i><b>16.4.6</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#model-basics-in-r"><i class="fa fa-check"></i><b>16.5</b> Model basics in R</a></li>
<li class="chapter" data-level="16.6" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#seasonality"><i class="fa fa-check"></i><b>16.6</b> Seasonality</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#your-turn-17"><i class="fa fa-check"></i><b>16.6.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#predict-co2-at-another-location"><i class="fa fa-check"></i><b>16.7</b> Predict co2 at another location</a>
<ul>
<li class="chapter" data-level="16.7.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#your-turn-18"><i class="fa fa-check"></i><b>16.7.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="16.8" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#using-optimisation-to-get-a-good-fit"><i class="fa fa-check"></i><b>16.8</b> Using optimisation to get a good fit</a>
<ul>
<li class="chapter" data-level="16.8.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#typical-distances"><i class="fa fa-check"></i><b>16.8.1</b> Typical distances</a></li>
<li class="chapter" data-level="16.8.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#your-turn-19"><i class="fa fa-check"></i><b>16.8.2</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="16.9" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#components-of-variation"><i class="fa fa-check"></i><b>16.9</b> Components of variation</a></li>
<li class="chapter" data-level="16.10" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#model-goodness-of-fit-statistics"><i class="fa fa-check"></i><b>16.10</b> Model goodness of fit statistics</a>
<ul>
<li class="chapter" data-level="16.10.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#your-turn-20"><i class="fa fa-check"></i><b>16.10.1</b> Your turn:</a></li>
</ul></li>
<li class="chapter" data-level="16.11" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#beyond-a-single-model"><i class="fa fa-check"></i><b>16.11</b> Beyond a single model</a></li>
<li class="chapter" data-level="16.12" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#gapminder"><i class="fa fa-check"></i><b>16.12</b> Gapminder</a>
<ul>
<li class="chapter" data-level="16.12.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#r-package"><i class="fa fa-check"></i><b>16.12.1</b> R package</a></li>
</ul></li>
<li class="chapter" data-level="16.13" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#fit-linear-models"><i class="fa fa-check"></i><b>16.13</b> Fit linear models</a>
<ul>
<li class="chapter" data-level="16.13.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#mutate-year"><i class="fa fa-check"></i><b>16.13.1</b> Mutate year</a></li>
</ul></li>
<li class="chapter" data-level="16.14" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#australia"><i class="fa fa-check"></i><b>16.14</b> Australia</a></li>
<li class="chapter" data-level="16.15" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#fit-all-countries"><i class="fa fa-check"></i><b>16.15</b> Fit all countries</a>
<ul>
<li class="chapter" data-level="16.15.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#five-minute-challenge"><i class="fa fa-check"></i><b>16.15.1</b> Five minute challenge</a></li>
<li class="chapter" data-level="16.15.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#plot-all-the-models"><i class="fa fa-check"></i><b>16.15.2</b> Plot all the models</a></li>
<li class="chapter" data-level="16.15.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#plot-all-the-model-coefficients"><i class="fa fa-check"></i><b>16.15.3</b> Plot all the model coefficients</a></li>
</ul></li>
<li class="chapter" data-level="16.16" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#model-diagnostics-by-country"><i class="fa fa-check"></i><b>16.16</b> Model diagnostics by country</a>
<ul>
<li class="chapter" data-level="16.16.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#plot-the-r2-values-as-a-histogram."><i class="fa fa-check"></i><b>16.16.1</b> Plot the <span class="math inline">\(R^2\)</span> values as a histogram.</a></li>
<li class="chapter" data-level="16.16.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#countries-with-worst-fit"><i class="fa fa-check"></i><b>16.16.2</b> Countries with worst fit</a></li>
<li class="chapter" data-level="16.16.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#five-minute-challenge-1"><i class="fa fa-check"></i><b>16.16.3</b> Five minute challenge</a></li>
</ul></li>
<li class="chapter" data-level="16.17" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#lab-exercise"><i class="fa fa-check"></i><b>16.17</b> Lab exercise</a></li>
<li class="chapter" data-level="16.18" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#transformations"><i class="fa fa-check"></i><b>16.18</b> Transformations</a>
<ul>
<li class="chapter" data-level="16.18.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#power-transformation"><i class="fa fa-check"></i><b>16.18.1</b> Power transformation</a></li>
<li class="chapter" data-level="16.18.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#transforming-categorical-variables"><i class="fa fa-check"></i><b>16.18.2</b> Transforming categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="16.19" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#adding-interactions-to-the-model"><i class="fa fa-check"></i><b>16.19</b> Adding interactions to the model</a>
<ul>
<li class="chapter" data-level="16.19.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#interaction-between-quantitative-and-categorical-variables"><i class="fa fa-check"></i><b>16.19.1</b> Interaction between quantitative and categorical variables</a></li>
<li class="chapter" data-level="16.19.2" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#five-minute-challenge-2"><i class="fa fa-check"></i><b>16.19.2</b> Five minute challenge</a></li>
<li class="chapter" data-level="16.19.3" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#which-is-the-better-model"><i class="fa fa-check"></i><b>16.19.3</b> Which is the better model?</a></li>
<li class="chapter" data-level="16.19.4" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#interaction-between-quantitative-variables"><i class="fa fa-check"></i><b>16.19.4</b> Interaction between quantitative variables</a></li>
<li class="chapter" data-level="16.19.5" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#five-minute-challenge-3"><i class="fa fa-check"></i><b>16.19.5</b> Five minute challenge</a></li>
</ul></li>
<li class="chapter" data-level="16.20" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#model-building"><i class="fa fa-check"></i><b>16.20</b> Model building</a>
<ul>
<li class="chapter" data-level="16.20.1" data-path="model-fitting-and-optimisation.html"><a href="model-fitting-and-optimisation.html#lab-exercise-1"><i class="fa fa-check"></i><b>16.20.1</b> Lab exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="generalied-linear-models.html"><a href="generalied-linear-models.html"><i class="fa fa-check"></i><b>17</b> Generalied linear models</a></li>
<li class="chapter" data-level="18" data-path="hierarchical-models.html"><a href="hierarchical-models.html"><i class="fa fa-check"></i><b>18</b> Hierarchical models</a></li>
<li class="chapter" data-level="19" data-path="ensembles-of-models.html"><a href="ensembles-of-models.html"><i class="fa fa-check"></i><b>19</b> Ensembles of models</a></li>
<li class="chapter" data-level="20" data-path="boosted-models.html"><a href="boosted-models.html"><i class="fa fa-check"></i><b>20</b> Boosted models</a></li>
<li class="chapter" data-level="21" data-path="bayesian-models.html"><a href="bayesian-models.html"><i class="fa fa-check"></i><b>21</b> Bayesian models</a></li>
<li class="chapter" data-level="22" data-path="decision-making-with-data.html"><a href="decision-making-with-data.html"><i class="fa fa-check"></i><b>22</b> Decision making with data</a></li>
<li class="chapter" data-level="23" data-path="us-flights.html"><a href="us-flights.html"><i class="fa fa-check"></i><b>23</b> US flights</a>
<ul>
<li class="chapter" data-level="23.1" data-path="us-flights.html"><a href="us-flights.html#flight-delays"><i class="fa fa-check"></i><b>23.1</b> Flight delays</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="us-flights.html"><a href="us-flights.html#cancellations"><i class="fa fa-check"></i><b>23.1.1</b> Cancellations?</a></li>
<li class="chapter" data-level="23.1.2" data-path="us-flights.html"><a href="us-flights.html#fuel"><i class="fa fa-check"></i><b>23.1.2</b> Fuel</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="climate-change.html"><a href="climate-change.html"><i class="fa fa-check"></i><b>24</b> Climate change</a>
<ul>
<li class="chapter" data-level="24.1" data-path="climate-change.html"><a href="climate-change.html#carbon-dioxide"><i class="fa fa-check"></i><b>24.1</b> Carbon dioxide</a>
<ul>
<li class="chapter" data-level="24.1.1" data-path="climate-change.html"><a href="climate-change.html#about-the-data"><i class="fa fa-check"></i><b>24.1.1</b> About the data</a></li>
<li class="chapter" data-level="24.1.2" data-path="climate-change.html"><a href="climate-change.html#temporal-trend"><i class="fa fa-check"></i><b>24.1.2</b> Temporal trend</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="accidents.html"><a href="accidents.html"><i class="fa fa-check"></i><b>25</b> Accidents</a>
<ul>
<li class="chapter" data-level="25.1" data-path="accidents.html"><a href="accidents.html#when-do-people-die-on-the-roads"><i class="fa fa-check"></i><b>25.1</b> When do people die on the roads?</a></li>
<li class="chapter" data-level="25.2" data-path="accidents.html"><a href="accidents.html#what-contributes-to-fatal-accidents"><i class="fa fa-check"></i><b>25.2</b> What contributes to fatal accidents?</a></li>
<li class="chapter" data-level="25.3" data-path="accidents.html"><a href="accidents.html#who-is-involved-in-fatal-accidents"><i class="fa fa-check"></i><b>25.3</b> Who is involved in fatal accidents?</a></li>
<li class="chapter" data-level="25.4" data-path="accidents.html"><a href="accidents.html#are-roads-getting-safer"><i class="fa fa-check"></i><b>25.4</b> Are roads getting safer?</a></li>
<li class="chapter" data-level="25.5" data-path="accidents.html"><a href="accidents.html#your-turn-21"><i class="fa fa-check"></i><b>25.5</b> Your Turn</a></li>
<li class="chapter" data-level="25.6" data-path="accidents.html"><a href="accidents.html#solutions"><i class="fa fa-check"></i><b>25.6</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="monitoring-polls.html"><a href="monitoring-polls.html"><i class="fa fa-check"></i><b>26</b> Monitoring polls</a></li>
<li class="chapter" data-level="27" data-path="vandalism.html"><a href="vandalism.html"><i class="fa fa-check"></i><b>27</b> Vandalism</a></li>
<li class="chapter" data-level="28" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html"><i class="fa fa-check"></i><b>28</b> PISA: Programme for International Student Assessment</a>
<ul>
<li class="chapter" data-level="28.1" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#data-access"><i class="fa fa-check"></i><b>28.1</b> Data access</a></li>
<li class="chapter" data-level="28.2" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#data-pre-processing"><i class="fa fa-check"></i><b>28.2</b> Data pre-processing</a></li>
<li class="chapter" data-level="28.3" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#examining-the-gender-gap-across-countries"><i class="fa fa-check"></i><b>28.3</b> Examining the gender gap across countries</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#clean-up-country-codes"><i class="fa fa-check"></i><b>28.3.1</b> Clean up country codes</a></li>
<li class="chapter" data-level="28.3.2" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#compute-weighted-means-by-country-and-gender"><i class="fa fa-check"></i><b>28.3.2</b> Compute weighted means by country and gender</a></li>
<li class="chapter" data-level="28.3.3" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#examine-the-math-gap-by-country"><i class="fa fa-check"></i><b>28.3.3</b> Examine the math gap by country</a></li>
<li class="chapter" data-level="28.3.4" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#what-we-learn"><i class="fa fa-check"></i><b>28.3.4</b> What we learn</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#your-turn-22"><i class="fa fa-check"></i><b>28.4</b> Your turn</a></li>
<li class="chapter" data-level="28.5" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#mapping-the-scores"><i class="fa fa-check"></i><b>28.5</b> Mapping the scores</a></li>
<li class="chapter" data-level="28.6" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#your-turn-23"><i class="fa fa-check"></i><b>28.6</b> Your turn</a></li>
<li class="chapter" data-level="28.7" data-path="pisa-programme-for-international-student-assessment.html"><a href="pisa-programme-for-international-student-assessment.html#change-in-scores-over-time"><i class="fa fa-check"></i><b>28.7</b> Change in scores over time</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="wages.html"><a href="wages.html"><i class="fa fa-check"></i><b>29</b> Wages</a>
<ul>
<li class="chapter" data-level="29.1" data-path="wages.html"><a href="wages.html#new-wages-data"><i class="fa fa-check"></i><b>29.1</b> New wages data</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="pedestrian-counting-sensor-data.html"><a href="pedestrian-counting-sensor-data.html"><i class="fa fa-check"></i><b>30</b> Pedestrian counting sensor data</a>
<ul>
<li class="chapter" data-level="30.1" data-path="pedestrian-counting-sensor-data.html"><a href="pedestrian-counting-sensor-data.html#overview-4"><i class="fa fa-check"></i><b>30.1</b> Overview</a></li>
<li class="chapter" data-level="30.2" data-path="pedestrian-counting-sensor-data.html"><a href="pedestrian-counting-sensor-data.html#different-temporal-patterns"><i class="fa fa-check"></i><b>30.2</b> Different temporal patterns</a></li>
<li class="chapter" data-level="30.3" data-path="pedestrian-counting-sensor-data.html"><a href="pedestrian-counting-sensor-data.html#does-the-weather-make-a-difference-to-the-number-of-people-walking-out"><i class="fa fa-check"></i><b>30.3</b> Does the weather make a difference to the number of people walking out?</a></li>
<li class="chapter" data-level="30.4" data-path="pedestrian-counting-sensor-data.html"><a href="pedestrian-counting-sensor-data.html#if-setting-up-a-coffee-business"><i class="fa fa-check"></i><b>30.4</b> If setting up a coffee business</a></li>
<li class="chapter" data-level="30.5" data-path="pedestrian-counting-sensor-data.html"><a href="pedestrian-counting-sensor-data.html#your-turn-24"><i class="fa fa-check"></i><b>30.5</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="government-surveys.html"><a href="government-surveys.html"><i class="fa fa-check"></i><b>31</b> Government surveys</a></li>
<li class="chapter" data-level="32" data-path="reproducible-documents.html"><a href="reproducible-documents.html"><i class="fa fa-check"></i><b>32</b> Reproducible documents</a></li>
<li class="chapter" data-level="33" data-path="collaborative-projects.html"><a href="collaborative-projects.html"><i class="fa fa-check"></i><b>33</b> Collaborative projects</a></li>
<li class="chapter" data-level="34" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>34</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/heike/data-technologies" target="blank">Published with Github.</a></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science and Statistical Thinking: With Wild-Caught Data and R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="handling-missings" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Handling Missings<a href="handling-missings.html#handling-missings" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="overview-1" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Overview<a href="handling-missings.html#overview-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>The story of missing flights</li>
<li>Data set overviews</li>
<li>Missingness patterns</li>
<li>Common ways to impute</li>
<li>Checking imputed values</li>
</ul>
</div>
<div id="a-story-of-missing-flights" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> A story of missing flights<a href="handling-missings.html#a-story-of-missing-flights" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/plane.jpg" /></p>
<p>Do you know what a <em>ghost flight</em> is?</p>
<p>When we were were first analysing the US airline traffic data, we found that it quite often occurred that a plane (identified by its tail number) landed at one airport but took off from another airport, e.g.</p>
<pre><code>Year Month DayofMonth DepTime ArrTime Origin  Dest Diverted 
1995 3     8          1102    1256    PIT     CVG  0 
1995 3     8          1311    NA      CVG     PIT  1 
1995 3     8          1913    2050    RIC     PIT  0 
1995 3     8          2134    2300    PIT     MSY  0 </code></pre>
<p>The plane landed in Pittsburgh but took off in Richmond.</p>
<p>This happens when a plane is needed at a location where there’s a shortage. A plane flies empty and it doesn’t get listed in the database. When it happens a lot, it indicates that the company is operating inefficiently.</p>
<p>An example was AirTran in March 2003. 46 flights, for a total of 31510 miles.</p>
<p><img src="images/airtran.png" /></p>
<p>Airtran repeatedly had financial difficulties in the following years, and finally ceased operations in 2014.</p>
<p><strong>Missing values are not always obvious in data.</strong></p>
</div>
<div id="data-set-overview" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Data set overview<a href="handling-missings.html#data-set-overview" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="handling-missings.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb78-2"><a href="handling-missings.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb78-3"><a href="handling-missings.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb78-4"><a href="handling-missings.html#cb78-4" aria-hidden="true" tabindex="-1"></a>tb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/TB_notifications_2018-03-18.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb78-5"><a href="handling-missings.html#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, iso3, year, new_sp_m04<span class="sc">:</span>new_sp_fu) <span class="sc">%&gt;%</span></span>
<span id="cb78-6"><a href="handling-missings.html#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(stuff, count, new_sp_m04<span class="sc">:</span>new_sp_fu) <span class="sc">%&gt;%</span></span>
<span id="cb78-7"><a href="handling-missings.html#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(stuff, <span class="fu">c</span>(<span class="st">&quot;stuff1&quot;</span>, <span class="st">&quot;stuff2&quot;</span>, <span class="st">&quot;genderage&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb78-8"><a href="handling-missings.html#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>stuff1, <span class="sc">-</span>stuff2) <span class="sc">%&gt;%</span></span>
<span id="cb78-9"><a href="handling-missings.html#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender=</span><span class="fu">substr</span>(genderage, <span class="dv">1</span>, <span class="dv">1</span>), </span>
<span id="cb78-10"><a href="handling-missings.html#cb78-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">age=</span><span class="fu">substr</span>(genderage, <span class="dv">2</span>, <span class="fu">length</span>(genderage))) <span class="sc">%&gt;%</span></span>
<span id="cb78-11"><a href="handling-missings.html#cb78-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>genderage)</span>
<span id="cb78-12"><a href="handling-missings.html#cb78-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-13"><a href="handling-missings.html#cb78-13" aria-hidden="true" tabindex="-1"></a>tb_au <span class="ot">&lt;-</span> tb <span class="sc">%&gt;%</span> </span>
<span id="cb78-14"><a href="handling-missings.html#cb78-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Australia&quot;</span>) </span>
<span id="cb78-15"><a href="handling-missings.html#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_dat</span>(tb_au)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-47-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Overview of the tb incidence in Australia.</p>
<p>This type of display is called a “heatmap”, displays the data table, with cells coloured according to some other information. In this case it is type of variable, and missingness status. What do we learn?</p>
<ul>
<li>Most of the variables are <code>character</code> (text) variables, or <code>integer</code> variables.</li>
<li>Missing values are located only in the counts, but it is in blocks, so perhaps corresponds to some category levels of the other variables.</li>
</ul>
</div>
<div id="missing-value-patterns" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Missing value patterns<a href="handling-missings.html#missing-value-patterns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>West Pacific Tropical Atmosphere Ocean Data, 1993 &amp; 1997, for improved detection, understanding and prediction of El Nino and La Nina, collected from <a href="http://www.pmel.noaa.gov/tao/index.shtml">http://www.pmel.noaa.gov/tao/index.shtml</a></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="handling-missings.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(oceanbuoys)</span>
<span id="cb79-2"><a href="handling-missings.html#cb79-2" aria-hidden="true" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">736</span></span>
<span id="cb79-3"><a href="handling-missings.html#cb79-3" aria-hidden="true" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">8</span></span>
<span id="cb79-4"><a href="handling-missings.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> year       <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>,…</span>
<span id="cb79-5"><a href="handling-missings.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> latitude   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,…</span>
<span id="cb79-6"><a href="handling-missings.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> longitude  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>,…</span>
<span id="cb79-7"><a href="handling-missings.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> sea_temp_c <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">27.59</span>, <span class="fl">27.55</span>, <span class="fl">27.57</span>, <span class="fl">27.62</span>, <span class="fl">27.65</span>, <span class="fl">27.83</span>, <span class="fl">28.01</span>, <span class="fl">28.04</span>, <span class="fl">28.</span>…</span>
<span id="cb79-8"><a href="handling-missings.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> air_temp_c <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">27.15</span>, <span class="fl">27.02</span>, <span class="fl">27.00</span>, <span class="fl">26.93</span>, <span class="fl">26.84</span>, <span class="fl">26.94</span>, <span class="fl">27.04</span>, <span class="fl">27.11</span>, <span class="fl">27.</span>…</span>
<span id="cb79-9"><a href="handling-missings.html#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> humidity   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">79.6</span>, <span class="fl">75.8</span>, <span class="fl">76.5</span>, <span class="fl">76.2</span>, <span class="fl">76.4</span>, <span class="fl">76.7</span>, <span class="fl">76.5</span>, <span class="fl">78.3</span>, <span class="fl">78.6</span>, <span class="fl">76.9</span>,…</span>
<span id="cb79-10"><a href="handling-missings.html#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> wind_ew    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="sc">-</span><span class="fl">6.4</span>, <span class="sc">-</span><span class="fl">5.3</span>, <span class="sc">-</span><span class="fl">5.1</span>, <span class="sc">-</span><span class="fl">4.9</span>, <span class="sc">-</span><span class="fl">3.5</span>, <span class="sc">-</span><span class="fl">4.4</span>, <span class="sc">-</span><span class="fl">2.0</span>, <span class="sc">-</span><span class="fl">3.7</span>, <span class="sc">-</span><span class="fl">4.2</span>, <span class="sc">-</span><span class="fl">3.6</span>,…</span>
<span id="cb79-11"><a href="handling-missings.html#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> wind_ns    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">5.4</span>, <span class="fl">5.3</span>, <span class="fl">4.5</span>, <span class="fl">2.5</span>, <span class="fl">4.1</span>, <span class="fl">1.6</span>, <span class="fl">3.5</span>, <span class="fl">4.5</span>, <span class="fl">5.0</span>, <span class="fl">3.5</span>, <span class="fl">2.9</span>, <span class="fl">1.8</span>,…</span></code></pre></div>
<p>The data has 736 observations, and 8 variables. All of the variables are numeric (including year).</p>
<div id="missingness-map" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Missingness map<a href="handling-missings.html#missingness-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="handling-missings.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(oceanbuoys, <span class="at">sort_miss=</span><span class="cn">TRUE</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-49-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>What do we learn?</p>
<ul>
<li>Two variables, air temperature and humidity, have a large number of missings.</li>
<li>Year, latitude and longitude have no missings</li>
<li>Sea temperature has a couple of missings</li>
<li>Some rows have a lot of missings</li>
</ul>
<p>Overall statistics, 3% of possible values are missing. That’s not much. BUT, both air temperature and humidity have more than 10% missing which is too much to ignore.</p>
</div>
<div id="numerical-summaries" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Numerical summaries<a href="handling-missings.html#numerical-summaries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Proportion of observations missing:</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="handling-missings.html#cb81-1" aria-hidden="true" tabindex="-1"></a>s_miss <span class="ot">&lt;-</span> <span class="fu">miss_summary</span>(oceanbuoys)</span>
<span id="cb81-2"><a href="handling-missings.html#cb81-2" aria-hidden="true" tabindex="-1"></a>s_miss<span class="sc">$</span>miss_df_prop</span>
<span id="cb81-3"><a href="handling-missings.html#cb81-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.03006114</span></span></code></pre></div>
<ul>
<li>Proportion of variables missing:</li>
</ul>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="handling-missings.html#cb82-1" aria-hidden="true" tabindex="-1"></a>s_miss<span class="sc">$</span>miss_var_prop</span>
<span id="cb82-2"><a href="handling-missings.html#cb82-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.375</span></span></code></pre></div>
<ul>
<li>How many observations have <span class="math inline">\(k\)</span> missings?</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="handling-missings.html#cb83-1" aria-hidden="true" tabindex="-1"></a>s_miss<span class="sc">$</span>miss_case_table</span>
<span id="cb83-2"><a href="handling-missings.html#cb83-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb83-3"><a href="handling-missings.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 3</span></span>
<span id="cb83-4"><a href="handling-missings.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  n_miss_in_case n_cases pct_cases</span>
<span id="cb83-5"><a href="handling-missings.html#cb83-5" aria-hidden="true" tabindex="-1"></a>           <span class="sc">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb83-6"><a href="handling-missings.html#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>              <span class="dv">0</span>     <span class="dv">565</span>    <span class="fl">76.8</span>  </span>
<span id="cb83-7"><a href="handling-missings.html#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>              <span class="dv">1</span>     <span class="dv">167</span>    <span class="fl">22.7</span>  </span>
<span id="cb83-8"><a href="handling-missings.html#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>              <span class="dv">2</span>       <span class="dv">2</span>     <span class="fl">0.272</span></span>
<span id="cb83-9"><a href="handling-missings.html#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>              <span class="dv">3</span>       <span class="dv">2</span>     <span class="fl">0.272</span></span></code></pre></div>
<ul>
<li>By group</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="handling-missings.html#cb84-1" aria-hidden="true" tabindex="-1"></a>s_miss_group <span class="ot">&lt;-</span> oceanbuoys <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="handling-missings.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> <span class="fu">miss_summary</span>()</span>
<span id="cb84-3"><a href="handling-missings.html#cb84-3" aria-hidden="true" tabindex="-1"></a>s_miss_group<span class="sc">$</span>miss_case_table</span>
<span id="cb84-4"><a href="handling-missings.html#cb84-4" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb84-5"><a href="handling-missings.html#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb84-6"><a href="handling-missings.html#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   year [2]</span></span>
<span id="cb84-7"><a href="handling-missings.html#cb84-7" aria-hidden="true" tabindex="-1"></a>   year n_miss_in_case n_cases pct_cases</span>
<span id="cb84-8"><a href="handling-missings.html#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>          <span class="er">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb84-9"><a href="handling-missings.html#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">1997</span>              <span class="dv">0</span>     <span class="dv">291</span>    <span class="fl">79.1</span>  </span>
<span id="cb84-10"><a href="handling-missings.html#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">1997</span>              <span class="dv">1</span>      <span class="dv">77</span>    <span class="fl">20.9</span>  </span>
<span id="cb84-11"><a href="handling-missings.html#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">1993</span>              <span class="dv">0</span>     <span class="dv">274</span>    <span class="fl">74.5</span>  </span>
<span id="cb84-12"><a href="handling-missings.html#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">1993</span>              <span class="dv">1</span>      <span class="dv">90</span>    <span class="fl">24.5</span>  </span>
<span id="cb84-13"><a href="handling-missings.html#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">1993</span>              <span class="dv">2</span>       <span class="dv">2</span>     <span class="fl">0.543</span></span>
<span id="cb84-14"><a href="handling-missings.html#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">1993</span>              <span class="dv">3</span>       <span class="dv">2</span>     <span class="fl">0.543</span></span></code></pre></div>
<p>You can call these separately with:</p>
<ul>
<li><code>prop_miss</code> - The proportion of missings</li>
<li><code>miss_var_prop</code> - The proportion of variables with a missing</li>
<li><code>miss_case_table</code> - The proportion of cases with <span class="math inline">\(k\)</span> missings</li>
</ul>
</div>
<div id="tend-to-get-ignored-by-most-software" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Tend to get ignored by most software<a href="handling-missings.html#tend-to-get-ignored-by-most-software" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>and this is a problem, because results computed on data with missing values might be biased. for example, <code>ggplot</code> ignores them, but at least tells you its ignoring them:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="handling-missings.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(oceanbuoys,</span>
<span id="cb85-2"><a href="handling-missings.html#cb85-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb85-3"><a href="handling-missings.html#cb85-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> humidity)) <span class="sc">+</span></span>
<span id="cb85-4"><a href="handling-missings.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span>
<span id="cb85-5"><a href="handling-missings.html#cb85-5" aria-hidden="true" tabindex="-1"></a>Warning<span class="sc">:</span> Removed <span class="dv">94</span> rows containing missing <span class="fu">values</span> (<span class="st">`</span><span class="at">geom_point()</span><span class="st">`</span>).</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-54-1.png" width="768" style="display: block; margin: auto;" /></p>
</div>
<div id="add-them-to-plot" class="section level3 hasAnchor" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> Add them to plot<a href="handling-missings.html#add-them-to-plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="handling-missings.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(oceanbuoys,</span>
<span id="cb86-2"><a href="handling-missings.html#cb86-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb86-3"><a href="handling-missings.html#cb86-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> humidity)) <span class="sc">+</span></span>
<span id="cb86-4"><a href="handling-missings.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb86-5"><a href="handling-missings.html#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_miss_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-55-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>By year</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="handling-missings.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(oceanbuoys,</span>
<span id="cb87-2"><a href="handling-missings.html#cb87-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb87-3"><a href="handling-missings.html#cb87-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> humidity)) <span class="sc">+</span></span>
<span id="cb87-4"><a href="handling-missings.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_miss_point</span>() <span class="sc">+</span> </span>
<span id="cb87-5"><a href="handling-missings.html#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb87-6"><a href="handling-missings.html#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb87-7"><a href="handling-missings.html#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>) </span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-56-1.png" width="768" style="display: block; margin: auto;" /></p>
</div>
<div id="understanding-missing-dependencies" class="section level3 hasAnchor" number="6.4.5">
<h3><span class="header-section-number">6.4.5</span> Understanding missing dependencies<a href="handling-missings.html#understanding-missing-dependencies" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="handling-missings.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(oceanbuoys,</span>
<span id="cb88-2"><a href="handling-missings.html#cb88-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb88-3"><a href="handling-missings.html#cb88-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> air_temp_c)) <span class="sc">+</span></span>
<span id="cb88-4"><a href="handling-missings.html#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_miss_point</span>() <span class="sc">+</span> </span>
<span id="cb88-5"><a href="handling-missings.html#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb88-6"><a href="handling-missings.html#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb88-7"><a href="handling-missings.html#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-57-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>What do we learn?</p>
<ul>
<li>There is a different missingness pattern in each of the years</li>
<li>Year needs to be accounted for in finding good substitute values.</li>
</ul>
</div>
</div>
<div id="shadow-matrix" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Shadow matrix<a href="handling-missings.html#shadow-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The shadow table is created to mark the location of missings in the original data table. Here, this gets appended to the original data, and then can be used to submet, or colour by different types of missingness.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="handling-missings.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_shadow</span>(oceanbuoys)</span>
<span id="cb89-2"><a href="handling-missings.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 736 × 8</span></span>
<span id="cb89-3"><a href="handling-missings.html#cb89-3" aria-hidden="true" tabindex="-1"></a>   year_NA latitude_NA longitude_NA sea_temp_c_NA air_temp_c_NA humidity_NA</span>
<span id="cb89-4"><a href="handling-missings.html#cb89-4" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>fct<span class="sc">&gt;</span>       <span class="er">&lt;</span>fct<span class="sc">&gt;</span>        <span class="er">&lt;</span>fct<span class="sc">&gt;</span>         <span class="er">&lt;</span>fct<span class="sc">&gt;</span>         <span class="er">&lt;</span>fct<span class="sc">&gt;</span>      </span>
<span id="cb89-5"><a href="handling-missings.html#cb89-5" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-6"><a href="handling-missings.html#cb89-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-7"><a href="handling-missings.html#cb89-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-8"><a href="handling-missings.html#cb89-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-9"><a href="handling-missings.html#cb89-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-10"><a href="handling-missings.html#cb89-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-11"><a href="handling-missings.html#cb89-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-12"><a href="handling-missings.html#cb89-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-13"><a href="handling-missings.html#cb89-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-14"><a href="handling-missings.html#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">!</span><span class="cn">NA</span>     <span class="sc">!</span><span class="cn">NA</span>         <span class="sc">!</span><span class="cn">NA</span>          <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>           <span class="sc">!</span><span class="cn">NA</span>        </span>
<span id="cb89-15"><a href="handling-missings.html#cb89-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 726 more rows</span></span>
<span id="cb89-16"><a href="handling-missings.html#cb89-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 2 more variables: wind_ew_NA &lt;fct&gt;, wind_ns_NA &lt;fct&gt;</span></span>
<span id="cb89-17"><a href="handling-missings.html#cb89-17" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys)</span>
<span id="cb89-18"><a href="handling-missings.html#cb89-18" aria-hidden="true" tabindex="-1"></a>tao_shadow</span>
<span id="cb89-19"><a href="handling-missings.html#cb89-19" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 736 × 16</span></span>
<span id="cb89-20"><a href="handling-missings.html#cb89-20" aria-hidden="true" tabindex="-1"></a>    year latitude longitude sea_temp_c air_temp_c humidity wind_ew wind_ns</span>
<span id="cb89-21"><a href="handling-missings.html#cb89-21" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>      <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>      <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb89-22"><a href="handling-missings.html#cb89-22" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">27.6</span>       <span class="fl">27.1</span>     <span class="fl">79.6</span>   <span class="sc">-</span><span class="fl">6.40</span>    <span class="fl">5.40</span></span>
<span id="cb89-23"><a href="handling-missings.html#cb89-23" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">27.5</span>       <span class="fl">27.0</span>     <span class="fl">75.8</span>   <span class="sc">-</span><span class="fl">5.30</span>    <span class="fl">5.30</span></span>
<span id="cb89-24"><a href="handling-missings.html#cb89-24" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">27.6</span>       <span class="dv">27</span>       <span class="fl">76.5</span>   <span class="sc">-</span><span class="fl">5.10</span>    <span class="fl">4.5</span> </span>
<span id="cb89-25"><a href="handling-missings.html#cb89-25" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">27.6</span>       <span class="fl">26.9</span>     <span class="fl">76.2</span>   <span class="sc">-</span><span class="fl">4.90</span>    <span class="fl">2.5</span> </span>
<span id="cb89-26"><a href="handling-missings.html#cb89-26" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">27.6</span>       <span class="fl">26.8</span>     <span class="fl">76.4</span>   <span class="sc">-</span><span class="fl">3.5</span>     <span class="fl">4.10</span></span>
<span id="cb89-27"><a href="handling-missings.html#cb89-27" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">27.8</span>       <span class="fl">26.9</span>     <span class="fl">76.7</span>   <span class="sc">-</span><span class="fl">4.40</span>    <span class="fl">1.60</span></span>
<span id="cb89-28"><a href="handling-missings.html#cb89-28" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">28.0</span>       <span class="fl">27.0</span>     <span class="fl">76.5</span>   <span class="sc">-</span><span class="dv">2</span>       <span class="fl">3.5</span> </span>
<span id="cb89-29"><a href="handling-missings.html#cb89-29" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">28.0</span>       <span class="fl">27.1</span>     <span class="fl">78.3</span>   <span class="sc">-</span><span class="fl">3.70</span>    <span class="fl">4.5</span> </span>
<span id="cb89-30"><a href="handling-missings.html#cb89-30" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">28.0</span>       <span class="fl">27.2</span>     <span class="fl">78.6</span>   <span class="sc">-</span><span class="fl">4.20</span>    <span class="dv">5</span>   </span>
<span id="cb89-31"><a href="handling-missings.html#cb89-31" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="dv">1997</span>        <span class="dv">0</span>      <span class="sc">-</span><span class="dv">110</span>       <span class="fl">28.0</span>       <span class="fl">27.2</span>     <span class="fl">76.9</span>   <span class="sc">-</span><span class="fl">3.60</span>    <span class="fl">3.5</span> </span>
<span id="cb89-32"><a href="handling-missings.html#cb89-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 726 more rows</span></span>
<span id="cb89-33"><a href="handling-missings.html#cb89-33" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 8 more variables: year_NA &lt;fct&gt;, latitude_NA &lt;fct&gt;, longitude_NA &lt;fct&gt;,</span></span>
<span id="cb89-34"><a href="handling-missings.html#cb89-34" aria-hidden="true" tabindex="-1"></a><span class="co">#   sea_temp_c_NA &lt;fct&gt;, air_temp_c_NA &lt;fct&gt;, humidity_NA &lt;fct&gt;,</span></span>
<span id="cb89-35"><a href="handling-missings.html#cb89-35" aria-hidden="true" tabindex="-1"></a><span class="co">#   wind_ew_NA &lt;fct&gt;, wind_ns_NA &lt;fct&gt;</span></span>
<span id="cb89-36"><a href="handling-missings.html#cb89-36" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(tao_shadow)</span>
<span id="cb89-37"><a href="handling-missings.html#cb89-37" aria-hidden="true" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">736</span></span>
<span id="cb89-38"><a href="handling-missings.html#cb89-38" aria-hidden="true" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">16</span></span>
<span id="cb89-39"><a href="handling-missings.html#cb89-39" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> year          <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, <span class="dv">1997</span>, 19…</span>
<span id="cb89-40"><a href="handling-missings.html#cb89-40" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> latitude      <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,…</span>
<span id="cb89-41"><a href="handling-missings.html#cb89-41" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> longitude     <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span><span class="dv">110</span>, <span class="sc">-</span>1…</span>
<span id="cb89-42"><a href="handling-missings.html#cb89-42" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> sea_temp_c    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">27.59</span>, <span class="fl">27.55</span>, <span class="fl">27.57</span>, <span class="fl">27.62</span>, <span class="fl">27.65</span>, <span class="fl">27.83</span>, <span class="fl">28.01</span>, <span class="fl">28.04</span>, …</span>
<span id="cb89-43"><a href="handling-missings.html#cb89-43" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> air_temp_c    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">27.15</span>, <span class="fl">27.02</span>, <span class="fl">27.00</span>, <span class="fl">26.93</span>, <span class="fl">26.84</span>, <span class="fl">26.94</span>, <span class="fl">27.04</span>, <span class="fl">27.11</span>, …</span>
<span id="cb89-44"><a href="handling-missings.html#cb89-44" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> humidity      <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">79.6</span>, <span class="fl">75.8</span>, <span class="fl">76.5</span>, <span class="fl">76.2</span>, <span class="fl">76.4</span>, <span class="fl">76.7</span>, <span class="fl">76.5</span>, <span class="fl">78.3</span>, <span class="fl">78.6</span>, 76…</span>
<span id="cb89-45"><a href="handling-missings.html#cb89-45" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> wind_ew       <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="sc">-</span><span class="fl">6.4</span>, <span class="sc">-</span><span class="fl">5.3</span>, <span class="sc">-</span><span class="fl">5.1</span>, <span class="sc">-</span><span class="fl">4.9</span>, <span class="sc">-</span><span class="fl">3.5</span>, <span class="sc">-</span><span class="fl">4.4</span>, <span class="sc">-</span><span class="fl">2.0</span>, <span class="sc">-</span><span class="fl">3.7</span>, <span class="sc">-</span><span class="fl">4.2</span>, <span class="sc">-</span>3…</span>
<span id="cb89-46"><a href="handling-missings.html#cb89-46" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> wind_ns       <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">5.4</span>, <span class="fl">5.3</span>, <span class="fl">4.5</span>, <span class="fl">2.5</span>, <span class="fl">4.1</span>, <span class="fl">1.6</span>, <span class="fl">3.5</span>, <span class="fl">4.5</span>, <span class="fl">5.0</span>, <span class="fl">3.5</span>, <span class="fl">2.9</span>, 1…</span>
<span id="cb89-47"><a href="handling-missings.html#cb89-47" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> year_NA       <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-48"><a href="handling-missings.html#cb89-48" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> latitude_NA   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-49"><a href="handling-missings.html#cb89-49" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> longitude_NA  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-50"><a href="handling-missings.html#cb89-50" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> sea_temp_c_NA <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-51"><a href="handling-missings.html#cb89-51" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> air_temp_c_NA <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-52"><a href="handling-missings.html#cb89-52" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> humidity_NA   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-53"><a href="handling-missings.html#cb89-53" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> wind_ew_NA    <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span>
<span id="cb89-54"><a href="handling-missings.html#cb89-54" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> wind_ns_NA    <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span><span class="cn">NA</span>, <span class="sc">!</span>…</span></code></pre></div>
<div id="relationship-with-other-variables" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Relationship with other variables<a href="handling-missings.html#relationship-with-other-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="handling-missings.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> tao_shadow,</span>
<span id="cb90-2"><a href="handling-missings.html#cb90-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> wind_ew, </span>
<span id="cb90-3"><a href="handling-missings.html#cb90-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y=</span>wind_ns, </span>
<span id="cb90-4"><a href="handling-missings.html#cb90-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour=</span>air_temp_c_NA)) <span class="sc">+</span></span>
<span id="cb90-5"><a href="handling-missings.html#cb90-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb90-6"><a href="handling-missings.html#cb90-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>) </span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-59-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>What do we learn?</p>
<ul>
<li>The lowest values of east-west winds have no missing values. Maybe it is less likely to have air temperature missing values when there are light east-west winds?</li>
</ul>
</div>
<div id="two-minute-challenge" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> Two minute challenge<a href="handling-missings.html#two-minute-challenge" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Generate the shadow matrix and make a plot of the winds, coloured by missingness on humidity.</li>
</ul>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="handling-missings.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> tao_shadow,</span>
<span id="cb91-2"><a href="handling-missings.html#cb91-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> wind_ew, </span>
<span id="cb91-3"><a href="handling-missings.html#cb91-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y=</span>wind_ns, </span>
<span id="cb91-4"><a href="handling-missings.html#cb91-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour=</span>humidity_NA)) <span class="sc">+</span></span>
<span id="cb91-5"><a href="handling-missings.html#cb91-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb91-6"><a href="handling-missings.html#cb91-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>) </span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-60-1.png" width="768" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="strategy" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Strategy<a href="handling-missings.html#strategy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>An small fraction of cases have several missings, drop the cases</li>
<li>A variable or two, out of many, have a lot of missings, drop the variables</li>
<li>If missings are small in number, but located in many cases and variables, you need to impute these values, to do most analyses</li>
<li>Designing the imputation should take into account dependencies that you have seen between missingness and existing variables.</li>
<li>For the ocean buoys data this means imputation needs to be done separately by year</li>
</ul>
</div>
<div id="common-ways-to-impute-values" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Common ways to impute values<a href="handling-missings.html#common-ways-to-impute-values" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Simple parametric: use the mean or median of the complete cases for each variable</li>
<li>Simple non-parametric: find the <span class="math inline">\(k\)</span> nearest neighbours with a complete value and average these</li>
<li>Multiple imputation: Use a statistical distribution, e.g. normal model and simulate a value (or set of values, hot deck imputation) for the missings</li>
</ul>
<div id="mean" class="section level3 hasAnchor" number="6.7.1">
<h3><span class="header-section-number">6.7.1</span> Mean<a href="handling-missings.html#mean" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ignoring year.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="handling-missings.html#cb92-1" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> tao_shadow <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="handling-missings.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">impute_mean_at</span>(<span class="fu">vars</span>(sea_temp_c,</span>
<span id="cb92-3"><a href="handling-missings.html#cb92-3" aria-hidden="true" tabindex="-1"></a>                      air_temp_c))</span>
<span id="cb92-4"><a href="handling-missings.html#cb92-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-5"><a href="handling-missings.html#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tao_shadow,</span>
<span id="cb92-6"><a href="handling-missings.html#cb92-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb92-7"><a href="handling-missings.html#cb92-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> air_temp_c, </span>
<span id="cb92-8"><a href="handling-missings.html#cb92-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour =</span> air_temp_c_NA)) <span class="sc">+</span></span>
<span id="cb92-9"><a href="handling-missings.html#cb92-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb92-10"><a href="handling-missings.html#cb92-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb92-11"><a href="handling-missings.html#cb92-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb92-12"><a href="handling-missings.html#cb92-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-61-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>What do we learn?</p>
<ul>
<li>Oh, this is so wrong!</li>
<li>The imputed values are nothing like the complete case values</li>
</ul>
</div>
<div id="by-year" class="section level3 hasAnchor" number="6.7.2">
<h3><span class="header-section-number">6.7.2</span> by year<a href="handling-missings.html#by-year" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="handling-missings.html#cb93-1" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys)</span>
<span id="cb93-2"><a href="handling-missings.html#cb93-2" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> tao_shadow <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="handling-missings.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb93-4"><a href="handling-missings.html#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">impute_mean_at</span>(<span class="fu">vars</span>(sea_temp_c,</span>
<span id="cb93-5"><a href="handling-missings.html#cb93-5" aria-hidden="true" tabindex="-1"></a>                      air_temp_c))</span>
<span id="cb93-6"><a href="handling-missings.html#cb93-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-7"><a href="handling-missings.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tao_shadow,</span>
<span id="cb93-8"><a href="handling-missings.html#cb93-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb93-9"><a href="handling-missings.html#cb93-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> air_temp_c, </span>
<span id="cb93-10"><a href="handling-missings.html#cb93-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour=</span>air_temp_c_NA)) <span class="sc">+</span></span>
<span id="cb93-11"><a href="handling-missings.html#cb93-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb93-12"><a href="handling-missings.html#cb93-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb93-13"><a href="handling-missings.html#cb93-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb93-14"><a href="handling-missings.html#cb93-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-62-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>What do we learn?</p>
<ul>
<li>The imputed values are closer to the complete case values</li>
<li>However, they form a rigid line, mismatching the variation</li>
<li>and they extend outside the range of complete values. This is a problem in that the imputed air temperature value for these high sea temperature cases is lower than we would expect, and thus possibly impeding good model fitting</li>
</ul>
</div>
<div id="two-minute-challenge-1" class="section level3 hasAnchor" number="6.7.3">
<h3><span class="header-section-number">6.7.3</span> Two minute challenge<a href="handling-missings.html#two-minute-challenge-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Change the code to plot sea temperature against humidity, with colour representing missing humidity values. What do you learn about the imputations?</li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="handling-missings.html#cb94-1" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys)</span>
<span id="cb94-2"><a href="handling-missings.html#cb94-2" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> tao_shadow <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="handling-missings.html#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb94-4"><a href="handling-missings.html#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">impute_mean_at</span>(<span class="fu">vars</span>(sea_temp_c,</span>
<span id="cb94-5"><a href="handling-missings.html#cb94-5" aria-hidden="true" tabindex="-1"></a>                      air_temp_c,</span>
<span id="cb94-6"><a href="handling-missings.html#cb94-6" aria-hidden="true" tabindex="-1"></a>                      humidity))</span>
<span id="cb94-7"><a href="handling-missings.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tao_shadow,</span>
<span id="cb94-8"><a href="handling-missings.html#cb94-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb94-9"><a href="handling-missings.html#cb94-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> humidity, </span>
<span id="cb94-10"><a href="handling-missings.html#cb94-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour=</span>humidity_NA)) <span class="sc">+</span></span>
<span id="cb94-11"><a href="handling-missings.html#cb94-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb94-12"><a href="handling-missings.html#cb94-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb94-13"><a href="handling-missings.html#cb94-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb94-14"><a href="handling-missings.html#cb94-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-63-1.png" width="768" style="display: block; margin: auto;" /></p>
</div>
<div id="nearest-neighbors-imputation" class="section level3 hasAnchor" number="6.7.4">
<h3><span class="header-section-number">6.7.4</span> Nearest neighbors imputation<a href="handling-missings.html#nearest-neighbors-imputation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The package <code>impute</code> from Bioconductor has a nice nearest neighbor imputation implementation.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="handling-missings.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#source(&quot;https://bioconductor.org/biocLite.R&quot;)</span></span>
<span id="cb95-2"><a href="handling-missings.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co">#biocLite(&quot;impute&quot;)</span></span>
<span id="cb95-3"><a href="handling-missings.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(impute)</span>
<span id="cb95-4"><a href="handling-missings.html#cb95-4" aria-hidden="true" tabindex="-1"></a>tao_impute <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys) <span class="sc">%&gt;%</span></span>
<span id="cb95-5"><a href="handling-missings.html#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, sea_temp_c, air_temp_c) <span class="sc">%&gt;%</span></span>
<span id="cb95-6"><a href="handling-missings.html#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sea_temp_c, air_temp_c) </span>
<span id="cb95-7"><a href="handling-missings.html#cb95-7" aria-hidden="true" tabindex="-1"></a>tao_impute <span class="ot">&lt;-</span> <span class="fu">impute.knn</span>(<span class="fu">as.matrix</span>(tao_impute), <span class="dv">5</span>)</span>
<span id="cb95-8"><a href="handling-missings.html#cb95-8" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys) <span class="sc">%&gt;%</span></span>
<span id="cb95-9"><a href="handling-missings.html#cb95-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, sea_temp_c, air_temp_c) <span class="sc">%&gt;%</span></span>
<span id="cb95-10"><a href="handling-missings.html#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sea_temp_c =</span> tao_impute<span class="sc">$</span>data[,<span class="dv">1</span>],</span>
<span id="cb95-11"><a href="handling-missings.html#cb95-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">air_temp_c =</span> tao_impute<span class="sc">$</span>data[,<span class="dv">2</span>])</span>
<span id="cb95-12"><a href="handling-missings.html#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tao_shadow,</span>
<span id="cb95-13"><a href="handling-missings.html#cb95-13" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb95-14"><a href="handling-missings.html#cb95-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> air_temp_c, </span>
<span id="cb95-15"><a href="handling-missings.html#cb95-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour=</span>air_temp_c_NA)) <span class="sc">+</span></span>
<span id="cb95-16"><a href="handling-missings.html#cb95-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb95-17"><a href="handling-missings.html#cb95-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb95-18"><a href="handling-missings.html#cb95-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb95-19"><a href="handling-missings.html#cb95-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="by-year-1" class="section level3 hasAnchor" number="6.7.5">
<h3><span class="header-section-number">6.7.5</span> by year<a href="handling-missings.html#by-year-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="handling-missings.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(impute)</span>
<span id="cb96-2"><a href="handling-missings.html#cb96-2" aria-hidden="true" tabindex="-1"></a>tao_impute_93 <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys) <span class="sc">%&gt;%</span></span>
<span id="cb96-3"><a href="handling-missings.html#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, sea_temp_c, air_temp_c) <span class="sc">%&gt;%</span></span>
<span id="cb96-4"><a href="handling-missings.html#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">&quot;1993&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb96-5"><a href="handling-missings.html#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sea_temp_c, air_temp_c) </span>
<span id="cb96-6"><a href="handling-missings.html#cb96-6" aria-hidden="true" tabindex="-1"></a>tao_impute_93 <span class="ot">&lt;-</span> <span class="fu">impute.knn</span>(<span class="fu">as.matrix</span>(tao_impute_93), <span class="dv">5</span>)</span>
<span id="cb96-7"><a href="handling-missings.html#cb96-7" aria-hidden="true" tabindex="-1"></a>tao_impute_97 <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys) <span class="sc">%&gt;%</span></span>
<span id="cb96-8"><a href="handling-missings.html#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, sea_temp_c, air_temp_c) <span class="sc">%&gt;%</span></span>
<span id="cb96-9"><a href="handling-missings.html#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">&quot;1997&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb96-10"><a href="handling-missings.html#cb96-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sea_temp_c, air_temp_c)</span>
<span id="cb96-11"><a href="handling-missings.html#cb96-11" aria-hidden="true" tabindex="-1"></a>tao_impute_97 <span class="ot">&lt;-</span> <span class="fu">impute.knn</span>(<span class="fu">as.matrix</span>(tao_impute_97), <span class="dv">5</span>)</span>
<span id="cb96-12"><a href="handling-missings.html#cb96-12" aria-hidden="true" tabindex="-1"></a>tao_impute <span class="ot">&lt;-</span> <span class="fu">rbind</span>(tao_impute_93<span class="sc">$</span>data, tao_impute_97<span class="sc">$</span>data)</span>
<span id="cb96-13"><a href="handling-missings.html#cb96-13" aria-hidden="true" tabindex="-1"></a>tao_shadow <span class="ot">&lt;-</span> <span class="fu">bind_shadow</span>(oceanbuoys) <span class="sc">%&gt;%</span></span>
<span id="cb96-14"><a href="handling-missings.html#cb96-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, sea_temp_c, air_temp_c) <span class="sc">%&gt;%</span></span>
<span id="cb96-15"><a href="handling-missings.html#cb96-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sea_temp_c =</span> tao_impute[,<span class="dv">1</span>],</span>
<span id="cb96-16"><a href="handling-missings.html#cb96-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">air_temp_c =</span> tao_impute[,<span class="dv">2</span>])</span>
<span id="cb96-17"><a href="handling-missings.html#cb96-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tao_shadow,</span>
<span id="cb96-18"><a href="handling-missings.html#cb96-18" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sea_temp_c,</span>
<span id="cb96-19"><a href="handling-missings.html#cb96-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> air_temp_c, </span>
<span id="cb96-20"><a href="handling-missings.html#cb96-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour=</span>air_temp_c_NA)) <span class="sc">+</span></span>
<span id="cb96-21"><a href="handling-missings.html#cb96-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb96-22"><a href="handling-missings.html#cb96-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span> </span>
<span id="cb96-23"><a href="handling-missings.html#cb96-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-24"><a href="handling-missings.html#cb96-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio=</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="two-minute-challenge-2" class="section level3 hasAnchor" number="6.7.6">
<h3><span class="header-section-number">6.7.6</span> Two minute challenge<a href="handling-missings.html#two-minute-challenge-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Change the code to plot sea temperature against humidity, with colour representing missing humidity values. What do you learn about the imputations?</li>
</ul>
</div>
</div>
<div id="exercise-6" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Exercise<a href="handling-missings.html#exercise-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We are going to examine Melbourne house prices, using a data set available at <a href="https://www.kaggle.com/anthonypino/melbourne-housing-market" class="uri">https://www.kaggle.com/anthonypino/melbourne-housing-market</a>). It was constructed by scraping the auction reports over several years, and adding more information on property details by scraping the web pages on the properties at domain.com.</p>
<ol style="list-style-type: decimal">
<li>Make an overview plot of the full data. Which variables have missings?</li>
<li>Focus ONLY on the variables Price, Rooms, Type, Distance, Bedroom2, Bathroom. Remove the observations that have missing values on Price, because this is the response variable that we want to ultimately predict. We can’t build a stable model for price if we don’t know the price.</li>
<li>Make a missing values summary of all the data - what proportion of observations are missing on Price?</li>
<li>Make the shadow matrix, and plot Bathroom vs Bedroom2 coloured by missingness on Bedroom2. Why don’t any missing values show up?</li>
<li>Impute the missing values for Bedroom2 and Bathroom, by using mean imputation. Make a plot of the two variables, with the imputed values coloured. Describe the pattern that you see.</li>
<li>Impute the missing values for Bedroom2 and Bathroom, using a linear model on th variable Rooms. Make a plot of the two variables, with the imputed values coloured. Is this better or worse than the mean value imputed values? Explain your thinking. (You can use the code below to help do this type of imputation. )</li>
</ol>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="handling-missings.html#cb97-1" aria-hidden="true" tabindex="-1"></a>houses_sub <span class="ot">&lt;-</span> houses <span class="sc">%&gt;%</span> <span class="fu">select</span>(Price, Rooms, Type, Distance, Bedroom2, Bathroom)</span>
<span id="cb97-2"><a href="handling-missings.html#cb97-2" aria-hidden="true" tabindex="-1"></a>houses_sub <span class="ot">&lt;-</span> houses_sub <span class="sc">%&gt;%</span> <span class="fu">bind_shadow</span>()</span>
<span id="cb97-3"><a href="handling-missings.html#cb97-3" aria-hidden="true" tabindex="-1"></a>br2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Bedroom2<span class="sc">~</span>Rooms, <span class="at">data=</span>houses_sub)</span>
<span id="cb97-4"><a href="handling-missings.html#cb97-4" aria-hidden="true" tabindex="-1"></a>ba <span class="ot">&lt;-</span> <span class="fu">lm</span>(Bathroom<span class="sc">~</span>Rooms, <span class="at">data=</span>houses_sub)</span>
<span id="cb97-5"><a href="handling-missings.html#cb97-5" aria-hidden="true" tabindex="-1"></a>houses_sub <span class="ot">&lt;-</span> houses_sub <span class="sc">%&gt;%</span></span>
<span id="cb97-6"><a href="handling-missings.html#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Bedroom2=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(Bedroom2), <span class="fu">predict</span>(br2, <span class="at">new=</span>houses_sub), Bedroom2),</span>
<span id="cb97-7"><a href="handling-missings.html#cb97-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Bathroom=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(Bathroom), <span class="fu">predict</span>(br2, <span class="at">new=</span>houses_sub), Bathroom))</span>
<span id="cb97-8"><a href="handling-missings.html#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(houses_sub, <span class="fu">aes</span>(<span class="at">x=</span>Bedroom2, <span class="at">y=</span>Bathroom,</span>
<span id="cb97-9"><a href="handling-missings.html#cb97-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">colour=</span>Bedroom2_NA)) <span class="sc">+</span></span>
<span id="cb97-10"><a href="handling-missings.html#cb97-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="wrangling-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/heike/data-technologies/edit/master/03c-data-missings.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": false
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
